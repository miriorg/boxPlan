# ToDo & ヒアリング事項

## ヒアリング事項 (完了)

### UI/UX関連
- **Q1.** ユーザーは収納ボックスの「メーカー」をどのように選択する想定ですか？ (例: ドロップダウンリスト、ラジオボタンなど)
  - **A.** メーカーはユーザーが入力したサイズによって作成されたプランによって確定します。 初期のアプリにメーカーの選択機能はありません。
- **Q2.** プランニングの基本制約に「奥行きサイズを統一して行う」とありますが、ユーザーは使用したいボックスの「奥行き」をどのように選択する想定ですか？
  - **A.** ユーザーが入力したサイズによって奥行きが適切にプランニングされて選択されるので初期のアプリに奥行きの選択肢はありません。
- **Q3.** デザインコンセプトの「モダンで、明るく淡い配色」について、もし具体的なカラーパレットや、イメージに近い参考Webサイトがあれば教えていただけますでしょうか？ (例: 無印良品公式サイトのような雰囲気、など)
  - **A.** ベースカラーは白系で #64BCFC #68c5f3 #454545 #dfdfdf を組み合わせて使用してみてください。

### プランニングロジック関連
- **Q4.** 最適化基準について、「スペース活用率が同程度の場合」の「同程度」とは、具体的にどのくらいの差を想定していますか？ (例: 1%未満の差は同程度とみなす、など)
  - **A.** 「パーセンテージを整数に丸めて同じ場合」同程度とみなす
- **Q5.** 「評価が近いプラン」を複数提案する場合、「評価が近い」と判断するための具体的な基準があれば教えてください。
  - **A.** スペース活用率が高く・ボックスの総数が少なく・ボックスタイプの種類数が多い
- **Q6.** 「種類や構成が異なるプラン」を判断するための、より詳細な基準はありますか？ (例: 使われているボックスの品番が一つでも違えば別構成とみなす、など)
  - **A.** 使われているボックスの高さ・幅が一つでも異なれば違うとみなす

### 機能仕様関連
- **Q7.** プラン共有機能で生成するURLの仕様について、特に希望はありますか？ なければ、こちらから `?plan=...` のようなキーを持つパラメータ形式を提案します。
  - **A.** それでOK

### 開発技術関連
- **Q8.** フロントエンドのフレームワークとして、React.js の利用を提案しますが、よろしいでしょうか？
  - **A.** OK

## 開発タスク

- [x] プロジェクトのセットアップ (React)
- [x] データ構造の定義 (メーカー、製品情報)
- [x] UIコンポーネントの作成 (入力フォーム、結果表示エリア)
- [x] プランニングアルゴリズムの実装
- [x] SVGによるレイアウト描画機能の実装
- [x] 手動調整機能の実装
- [ ] **(実行中)** URL共有機能の実装
  - [ ] **Step 1: シリアライズ/デシリアライズ関数の実装**
    - [x] `serializePlan(input, plan)`: 入力値とプランデータをJSON化し、Base64エンコードする
    - [x] `deserializePlan(encoded)`: Base64文字列をデコード・パースし、バリデーションを行ってデータを復元する
  - [x] **Step 2: URLパラメータ処理と状態復元**
    - [x] `App.tsx` 初期化時に `window.location.search` から `plan` パラメータを取得
    - [x] 取得したパラメータをデシリアライズし、アプリの状態（入力値、計算結果）を更新する
  - [x] **Step 3: UI実装**
    - [x] `generateShareUrl(encoded)`: 現在のURLとシリアライズデータから共有用URLを生成
    - [x] 結果表示エリアに「共有URLをコピー」ボタンを追加
    - [x] クリップボードAPIを使用したコピー機能と、ユーザーへのフィードバック（トースト等）の実装
- [x] レスポンシブデザイン対応
- [ ] Vercelへのデプロイ設定
  - [ ] Vercelアカウントの作成 (GitHubアカウントでログイン)
  - [ ] Vercelダッシュボードで「Add New Project」を選択
  - [ ] GitHubリポジトリ `boxPlan` をインポート
  - [ ] ビルド設定 (Framework Preset: Vite) を確認して「Deploy」を実行

## 技術的負債

- [ ] ビルド時に「`X` is not exported by `Y`」という警告（エラー表示）が解消されない。ビルドは成功するものの、TypeScriptの型解決に問題がある可能性。Vite + React + TypeScript の環境設定の再確認、または新規プロジェクト作成（`react-ts`テンプレート）を検討する必要がある。
- [ ] `App.tsx` の `handleUpdatePlan` ロジックにおいて、「クリックされたボックスが含まれる行全体と列全体が、新しい高さ・幅のボックスに一括で更新される」という仕様の厳密な実装がまだ不完全。特に、新しいボックスの高さ・幅が元のボックスデータに存在しない場合のハンドリングや、行・列の高さ・幅の再計算が、現在の `boxData` の構成と仕様の両面から再検討が必要。